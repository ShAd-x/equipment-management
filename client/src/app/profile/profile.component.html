<app-header-post-login></app-header-post-login>
<main>
  <h2>Mon Profil</h2>
  <p>Veuillez mettre à jour les informations ci-dessous pour modifier votre profil.</p>
  
  <div class="profile-container">
    <form [formGroup]="profileForm" (ngSubmit)="updateProfile()">
      <div class="form-group">
        <label for="name">Nom:</label>
        <input type="text" id="name" formControlName="name" required>
        <div *ngIf="profileForm.get('name')?.invalid && (profileForm.get('name')?.dirty || profileForm.get('name')?.touched)" class="error-message">
          <div *ngIf="profileForm.get('name')?.errors?.['required']">Le nom est requis.</div>
        </div>
      </div>
      <div class="form-group">
        <label for="email">Email:</label>
        <input type="email" id="email" formControlName="email" required>
        <div *ngIf="profileForm.get('email')?.invalid && (profileForm.get('email')?.dirty || profileForm.get('email')?.touched)" class="error-message">
          <div *ngIf="profileForm.get('email')?.errors?.['required']">L'email est requis.</div>
          <div *ngIf="profileForm.get('email')?.errors?.['email']">Format d'email invalide.</div>
        </div>
      </div>
      <div class="form-group">
        <label for="currentPassword">Mot de passe actuel:</label>
        <input type="password" id="currentPassword" formControlName="currentPassword" required>
        <div *ngIf="profileForm.get('currentPassword')?.invalid && (profileForm.get('currentPassword')?.dirty || profileForm.get('currentPassword')?.touched)" class="error-message">
          <div *ngIf="profileForm.get('currentPassword')?.errors?.['required']">Le mot de passe actuel est requis.</div>
        </div>
      </div>
      <div class="form-group">
        <label for="newPassword">Nouveau mot de passe:</label>
        <input type="password" id="newPassword" formControlName="newPassword">
      </div>
      <div class="form-group">
        <label for="confirmPassword">Confirmer le nouveau mot de passe:</label>
        <input type="password" id="confirmPassword" formControlName="confirmPassword">
        <div *ngIf="profileForm.errors?.['passwordMismatch'] && (profileForm.get('confirmPassword')?.dirty || profileForm.get('confirmPassword')?.touched)" class="error-message">
          Les nouveaux mots de passe ne correspondent pas.
        </div>
      </div>
      <div *ngIf="message" class="message">{{ message }}</div>
      <div class="button-group">
        <button type="button" class="btn btn-cancel" (click)="cancel()">Annuler</button>
        <button type="submit" class="btn btn-submit">Mettre à jour le profil</button>
      </div>
    </form>
  </div>
</main>
